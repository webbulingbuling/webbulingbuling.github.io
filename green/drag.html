<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>完美拖拽效果</title>
</head>

<style>
html{
    width:100%;
    height: 100%;
}
body{
    width:100%;
    height: 100%;
}
    #div1{
        width:210px;
        height:210px;
        background: url('../images/8.jpg');
        position:absolute;
        /* 拖拽效果:div必须是定位 */
    }

    /* 拖拽三大事件:onmousedown,onmousemove,onmouseup */
</style>
<script>

// 阻止默认事件:return false;
//setCaptrue():全局捕获(就是生成了一个透明的层)
//releaseCaptrue():释放全局
    window.onload=function(){
        var oDiv=document.getElementById('div1');
        var disX=0;
        var disY=0;

        if(oDiv.setCaptrue){//针对ie8及以下版本的兼容
            oDiv.setCaptrue();
        }
        oDiv.onmousedown = function (ev ){//鼠标坐标在ev对象下
            var ev=ev||window.event;//获取兼容后的event
            disX=ev.clientX-oDiv.offsetLeft;
            disY=ev.clientY-oDiv.offsetTop;

            document.onmousemove=function(ev){
                var ev = ev || window.event;
                oDiv.style.left = ev.clientX - disX +'px';
                oDiv.style.top = ev.clientY - disY +'px';
            };
            document.onmouseup=function(){
                document.onmousemove=null;
                document.onmouseup=null;

                if(oDiv.releaseCaptrue){
                    oDiv.releaseCaptrue();
                }
            }
            return false;
            // return false 这里用来解决拖拽图片的bug
        }

    }
</script>
<body>

<div id='div1'>

</div>
</body>
</html>
